---
title: MySQL 学习笔记 四 安全性与完整性
date: 2018-09-17 20:19:54
tags: 数据库
---
# 一 安全性（数据控制）
## 1 计算机系统的安全模型
1. 用户 - DBMS - OS - DB（用户标识、鉴别 - 数据库安全保护 - 操作系统安全保护 - 数据密码存储）

2. 信息安全标准：
两个有名的 TCSEC 和 CC 标准。
![TCSEC/TDI](图1.PNG)
![CC](图2.PNG)

3. 数据库安全性控制常用方法：
用户身份鉴别，存取控制（自主存取控制、强制存取控制），视图，审计，数据加密。
![数据库安全性控制模型](图3.PNG)

4. 存取控制（自主存取控制、强制存取控制）：

自主存取控制：对用户或角色授权一些操作，数据本身无密级。

强制存取控制：DBMS 管理的实体分为主体（许可证级别）、客体（密级）。对其分别设置敏感度标记。
- 敏感度标记：
![强制存取控制敏感度标记](图4.PNG)
- 规则：
![强制存取控制规则 1](图5.PNG)
![强制存取控制规则 2](图6.PNG)

## 2 创建数据库用户
只有系统管理员才有权限创建一个新数据库用户。
```
CREATE USER <用户名>
[WITH DBA|RESOURCE|CONNECT];
```
DBA：可创建用户，模式，基本表，视图，可授予其他用户一些权限。
RESOURCE：可创建基本表和视图，可授予其他用户一些权限。
CONNECT：为默认。只能登陆数据库，查询和操作需相应权限。

## 3 存取控制之授权与回收
1. 授权：
存取控制（自主存取控制）：必须防止不经根节点 DBA 的循环授权。
![存取控制（自主存取控制）](图7.PNG)

可以使用 GRANT 语句的三种：DBA、数据库对象创建者、拥有该权限的用户。
```
GRANT <权限>,...
ON <对象类型><对象名>,...
TO <用户>,...
[WITH GRANT OPTION] /*有此选项可传播权限*/

例：
GRANT UPDATE(sno),SELECT
ON TABLE student
TO u4; /*所有用户可用 public*/
```

补充：权限
insert、delete、update、select、references（允许创建关系时声明外键）、all privileges（授予所有权限）。

2. 权限回收：
```
REVOKE <权限>,...
ON <对象类型><对象名>,...
FROM <用户>,... [CASCADE|RESTRICT]
```

## 4 存取控制之数据库角色
角色是一组用户的集合。通过给角色授权，再将角色授给用户，简化给用户授权过程。

1. 创建角色：
`CREATE ROLE <角色>`

2. 将角色授给其他角色或用户：
```
GRANT <角色>,...
TO <角色|用户>,...
[WITH ADMIN OPTION] /*此用户或角色可将权限授给其他角色或用户*/
```

3. 角色权限的回收：
```
REVOKE <权限>,...
ON <对象类型><对象名>,...
FROM <角色>,...
```

## 5 审计


# 二 完整性
